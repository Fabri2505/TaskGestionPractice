<p-virtualScroller
  [items]="usuarios"
  [itemSize]="200"
  scrollHeight="calc(100vh - 350px)"
  [lazy]="false"
  styleClass="virtual-scroller-custom"
>
  <ng-template pTemplate="item" let-usuario let-i="usuario.id">
    <div class="p-2">
      <div class="bg-white rounded-lg shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 cursor-pointer overflow-hidden">
        <div class="p-6">
          <!-- Header del Card -->
          <div class="flex items-start gap-4 mb-4">
            <!-- Avatar -->
            <div [class]="'w-16 h-16 rounded-full flex items-center text-white justify-center font-bold text-xl ' + getAvatarColor(usuario.id)">
              {{ usuario.avatar }}
            </div>

            <!-- Información principal -->
            <div class="flex-1 min-w-0">
              <div class="flex items-start justify-between gap-2 mb-1">
                <h3 class="text-lg font-bold text-gray-800 truncate">
                  {{ usuario.nombre }}
                </h3>
                <p-tag
                  [value]="usuario.estado"
                  [severity]="getSeverity(usuario.estado)"
                  styleClass="text-xs"
                />
              </div>
              
              <div class="flex items-center gap-2 mb-2">
                <span class="inline-flex items-center font-mono text-sm bg-blue-50 text-blue-700 px-2 py-1 rounded">
                  <i class="pi pi-id-card mr-1 text-xs"></i>
                  {{ usuario.codigo }}
                </span>
              </div>
            </div>
          </div>

          <!-- Detalles -->
          <div class="space-y-2 mb-4">
            <div class="flex items-center gap-2 text-sm text-gray-600">
              <i class="pi pi-envelope text-blue-500"></i>
              <span class="truncate">{{ usuario.email }}</span>
            </div>
          </div>

          <!-- Botones de acción -->
          <div class="flex gap-2 pt-4 border-t border-gray-100">
            <p-button
              icon="pi pi-paperclip"
              [outlined]="true"
              severity="info"
              size="small"
              (onClick)="adjuntarTarea(usuario, $event)"
              pTooltip="Adjuntar tarea"
              tooltipPosition="top"
              label="Adjuntar"
              styleClass="flex-1"
            />
            <p-button
              icon="pi pi-share-alt"
              [outlined]="true"
              severity="success"
              size="small"
              (onClick)="compartirTarea(usuario, $event)"
              pTooltip="Compartir tarea"
              tooltipPosition="top"
              label="Compartir"
              styleClass="flex-1"
            />
          </div>
        </div>
      </div>
    </div>
  </ng-template>
</p-virtualScroller>
