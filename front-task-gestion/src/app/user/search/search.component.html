<div class="min-h-screen bg-gray-50 p-6">
  <div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="mb-6">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">Búsqueda de Usuarios</h1>
      <p class="text-gray-600">Encuentra usuarios por nombre o código</p>
    </div>

    <!-- Barra de búsqueda -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <div class="flex gap-3 items-center">
        <p-iconfield class="flex-1">
          <p-inputicon styleClass="pi pi-search" />
          <input
            pInputText
            type="text"
            [(ngModel)]="searchTerm"
            (input)="buscarUsuarios()"
            placeholder="Buscar por nombre o código..."
            class="w-full"
          />
        </p-iconfield>
        
        <p-button
          *ngIf="searchTerm"
          icon="pi pi-times"
          [text]="true"
          severity="secondary"
          (onClick)="limpiarBusqueda()"
          pTooltip="Limpiar búsqueda"
          tooltipPosition="top"
        />
      </div>

      <!-- Resultados contador -->
      <div class="mt-4 text-sm text-gray-600">
        <span class="font-semibold">{{ usuariosFiltrados.length }}</span> 
        {{ usuariosFiltrados.length === 1 ? 'usuario encontrado' : 'usuarios encontrados' }}
      </div>
    </div>

    <!-- Tabla de resultados -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
      <p-table
        [value]="usuariosFiltrados"
        [tableStyle]="{ 'min-width': '60rem' }"
        styleClass="p-datatable-gridlines"
        [paginator]="true"
        [rows]="10"
        [rowsPerPageOptions]="[5, 10, 20]"
      >
        <ng-template pTemplate="header">
          <tr>
            <th class="bg-gray-100 font-semibold text-gray-700">Código</th>
            <th class="bg-gray-100 font-semibold text-gray-700">Nombre</th>
            <th class="bg-gray-100 font-semibold text-gray-700">Email</th>
            <th class="bg-gray-100 font-semibold text-gray-700">Departamento</th>
            <th class="bg-gray-100 font-semibold text-gray-700">Estado</th>
            <th class="bg-gray-100 font-semibold text-gray-700 text-center">Acciones</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-usuario>
          <tr class="hover:bg-gray-50 transition-colors">
            <td>
              <span class="font-mono text-sm bg-blue-50 text-blue-700 px-2 py-1 rounded">
                {{ usuario.codigo }}
              </span>
            </td>
            <td class="font-medium text-gray-800">{{ usuario.nombre }}</td>
            <td class="text-gray-600">{{ usuario.email }}</td>
            <td class="text-gray-600">{{ usuario.departamento }}</td>
            <td>
              <p-tag
                [value]="usuario.estado"
                [severity]="getSeverity(usuario.estado)"
              />
            </td>
            <td>
              <div class="flex gap-2 justify-center">
                <p-button
                  icon="pi pi-paperclip"
                  [outlined]="true"
                  severity="info"
                  size="small"
                  (onClick)="adjuntarTarea(usuario)"
                  pTooltip="Adjuntar tarea"
                  tooltipPosition="top"
                  label="Adjuntar"
                />
                <p-button
                  icon="pi pi-share-alt"
                  [outlined]="true"
                  severity="success"
                  size="small"
                  (onClick)="compartirTarea(usuario)"
                  pTooltip="Compartir tarea"
                  tooltipPosition="top"
                  label="Compartir"
                />
              </div>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="6" class="text-center py-8">
              <div class="flex flex-col items-center gap-3">
                <i class="pi pi-search text-4xl text-gray-300"></i>
                <p class="text-gray-500 text-lg">No se encontraron usuarios</p>
                <p class="text-gray-400 text-sm">Intenta con otro término de búsqueda</p>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>